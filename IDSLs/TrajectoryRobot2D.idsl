module RoboCompTrajectoryRobot2D
{
	exception RoboCompException
	{
		string text;
	};
	
	struct TargetPose
	{
		float x;                 // millimeters
		float y;
		float z;
		float rx;    
		float ry;                // radians
		float rz;
		bool doRotation;         // if True orientates the robot at ry radians with the world z axis (around world's yaxis)
	};

	struct NavState
	{
		long elapsedTime;        // milliseconds all
		string state;
		long estimatedTime;
		long planningTime;
		float x;                 // x current position of robot
		float z;                 // z current position of robot
		float ang;               // ry current angular position of the robot
		float advV;              // current forward speed
		float rotV;
		float distanceToTarget;  // total distance to target
		string description;
	};

	dictionary<string, string> NavigationParameterMap;
	
	// PolyLines for Social Navigation
	struct PointL
	{
	  float x;
	  float z;
	};
	sequence<PointL> PolyLine;
	sequence<PolyLine> PolyLineList;  
	
	interface TrajectoryRobot2D
	{
		float go(TargetPose target) throws RoboCompException; // Takes the robot to target. ry is orientation if doRotation is True
		void setHumanSpace( PolyLineList polyList);
		
		float goReferenced(TargetPose target, float xRef, float zRef, float threshold) throws RoboCompException; // ry is orientation if doRotation is True
		float goBackwards(TargetPose target) throws RoboCompException;    // Moves the robot directly backwards
		float changeTarget(TargetPose target)throws RoboCompException;    // Change last point of curent trajectory
		NavState getState();                                              // Get current state
		void stop();                                                      // Stop the robot
		void mapBasedTarget(NavigationParameterMap parameters);
	};
};
  
